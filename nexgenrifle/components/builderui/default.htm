<div id="builder-canvas">

{% if not user %}
NO USER
{% else %}
    <div class="row">
        <div class="col-2" id="builder-controls">
        <button 
            class="btn btn-primary btn-block col-12"
            data-request="onCreateBuild"
            data-request-update="'@self': '#rifleBuilder'">
            Create New Build Instead
        </button>
            <button class="btn btn-secondary btn-block col-12" type="button">
                Load Build
            </button>
            <button class="btn btn-success btn-block col-12" type="button">
                Save Build
            </button>
            
        </div>
        <div class="col-10">
            {# this will display a button to create new builds#}
    <div id="rifleBuilder" class="rifle-builder">
{% partial '@partials/test' %}

 
       {# {% if __SELF__.hasActiveBuild() %}
            <div class="build-sections">
                <!-- Build navigation tabs -->
                <ul class="nav nav-tabs build-nav" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="lower-tab" data-bs-toggle="tab" data-bs-target="#lower" type="button" role="tab" aria-controls="lower" aria-selected="true">
                            Lower Receiver
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="upper-tab" data-bs-toggle="tab" data-bs-target="#upper" type="button" role="tab" aria-controls="upper" aria-selected="false">
                            Upper Receiver
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="accessories-tab" data-bs-toggle="tab" data-bs-target="#accessories" type="button" role="tab" aria-controls="accessories" aria-selected="false">
                            Accessories
                        </button>
                    </li>
                </ul>
                
                <!-- Tab content -->
                <div class="tab-content">
                    <div class="tab-pane fade show active" id="lower" role="tabpanel" aria-labelledby="lower-tab">
                        <!-- Lower Receiver Group -->
                        <div class="build-section">
                            {% partial '@lower-receiver-group' %}
                        </div>
                    </div>
                    <div class="tab-pane fade" id="upper" role="tabpanel" aria-labelledby="upper-tab">
                        <!-- Upper Receiver Group -->
                        <div class="build-section">
                            {% partial '@upper-receiver-group' %}
                        </div>
                    </div>
                    <div class="tab-pane fade" id="accessories" role="tabpanel" aria-labelledby="accessories-tab">
                        <!-- Accessories Group -->
                        <div class="build-section">
                            {% partial '@accessories-group' %}
                        </div>
                    </div>
                </div>
            </div>

            <div class="build-actions">
                <button 
                    class="btn btn-default"
                    data-request="onCancelBuild"
                    data-request-update="'@self': '#rifleBuilder'"
                    data-request-confirm="Cancel the current build? All unsaved changes will be lost.">
                    <i class="fa fa-times"></i> Cancel
                </button>

                <button 
                    class="btn btn-success"
                    data-request="onSaveBuild"
                    data-request-update="'@self': '#rifleBuilder'"
                    data-request-confirm="Save your current build progress?">
                    <i class="fa fa-save"></i> Save Build
                </button>
            </div>
        {% endif %}#}
    </div>
        </div>
    </div>

{% endif %}

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize tabs if needed (depends on your framework)
        if (typeof bootstrap !== 'undefined') {
            var triggerTabList = [].slice.call(document.querySelectorAll('.build-nav .nav-link'));
            triggerTabList.forEach(function(triggerEl) {
                var tabTrigger = new bootstrap.Tab(triggerEl);
                triggerEl.addEventListener('click', function(event) {
                    event.preventDefault();
                    tabTrigger.show();
                });
            });
        }
    });
</script>


</div>
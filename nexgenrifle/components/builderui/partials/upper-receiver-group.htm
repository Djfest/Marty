<div class="card mb-4" data-group-name="upper-receiver-group">
    <div class="card-header" 
         data-bs-toggle="collapse" 
         data-bs-target="#upperReceiverGroupBodyCollapse" 
         aria-expanded="true" 
         aria-controls="upperReceiverGroupBodyCollapse">
        <h3 class="mb-0">Upper Receiver Group</h3>
        <div class="card-header-right-content">
            <div class="selected-build-items-preview">
                <img src="https://placehold.co/30x30?text=UR" alt="Upper Receiver Preview" class="selected-item-preview-img item-preview-selected" title="Upper Receiver">
                <img src="https://placehold.co/30x30?text=BRL" alt="Barrel Preview" class="selected-item-preview-img item-preview-missing" title="Barrel">
                <img src="https://placehold.co/30x30?text=HG" alt="Handguard Preview" class="selected-item-preview-img item-preview-missing" title="Handguard">
                <img src="https://placehold.co/30x30?text=BCG" alt="BCG Preview" class="selected-item-preview-img item-preview-missing" title="Bolt Carrier Group">
            </div>
            <span class="badge bg-success current-group-price-badge">$139.99</span> <!-- Example: Price of first selected upper -->
        </div>
    </div>
    <div class="collapse show" id="upperReceiverGroupBodyCollapse">
        <div class="card-body">
            <!-- Component Category: Upper Receiver -->
            <div class="component-category" id="category-upper-receiver">
                <div class="d-flex justify-content-between align-items-center">
                    <div class="d-flex align-items-center">
                        <img src="https://placehold.co/100x100?text=M4E1+UpperMain" alt="Selected Upper Receiver" class="img-thumbnail me-3 category-preview-thumb" style="cursor: pointer;" data-bs-toggle="collapse" data-bs-target="#upperReceiverCollapse" aria-expanded="true">
                        <div>
                            <h5 class="mb-1">Upper Receiver</h5>
                            <p class="mb-0 category-preview-description">M4E1 Threaded Assembled Upper Receiver - Anodized Black</p>
                        </div>
                    </div>
                    <div>
                        <span class="badge bg-success category-preview-price">$139.99</span>
                    </div>
                </div>
                <div class="mt-3 collapse show" id="upperReceiverCollapse">
                    <input class="form-control mb-2" placeholder="Paste product URL or select from catalog">
                    <ul class="nav nav-tabs catalog-tabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="selected-upper-receiver-tab" data-bs-toggle="tab" data-bs-target="#selected-upper-receiver-content" type="button" role="tab" aria-selected="true">Selected Item</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="aero-upper-receiver-tab" data-bs-toggle="tab" data-bs-target="#aero-upper-receiver-content" type="button" role="tab" aria-selected="false">Aero Precision</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="other-source-upper-receiver-tab" data-bs-toggle="tab" data-bs-target="#other-source-upper-receiver-content" type="button" role="tab" aria-selected="false">Other Source</button>
                        </li>
                    </ul>
                    <div class="tab-content catalog-content">
                        <div class="tab-pane fade show active" id="selected-upper-receiver-content" role="tabpanel" aria-labelledby="selected-upper-receiver-tab">
                            <div class="selected-item-details p-3">
                                <h5 class="selected-item-name">M4E1 Threaded Assembled Upper Receiver - Anodized Black</h5>
                                <img src="https://placehold.co/600x400?text=M4E1+Upper+Large" class="img-fluid rounded mb-2 selected-item-image" alt="Selected M4E1 Upper Product Image">
                                <p class="selected-item-description-full">Full description of the M4E1 Threaded Assembled Upper Receiver.</p>
                                <p><strong>Price:</strong> <span class="selected-item-price-value">$139.99</span></p>
                                <p><strong>Status:</strong> <span class="selected-item-stock-status">In Stock</span></p>
                                <a href="https://www.aeroprecisionusa.com/m4e1-threaded-assembled-upper-receiver-anodized-black" target="_blank" class="btn btn-primary selected-item-view-original">View Original Product Page</a>
                            </div>
                        </div>
                        <div class="tab-pane fade product-list-horizontal-scroll" id="aero-upper-receiver-content" role="tabpanel" aria-labelledby="aero-upper-receiver-tab">
                            <div class="product-item-card mt-3" 
                                 data-price-value="139.99" 
                                 data-category-thumb-src="https://placehold.co/100x100?text=M4E1+UpperMain" 
                                 data-category-description="M4E1 Threaded Assembled Upper Receiver - Anodized Black"
                                 data-selected-image-src="https://placehold.co/600x400?text=M4E1+Upper+Large"
                                 data-selected-name="M4E1 Threaded Assembled Upper Receiver - Anodized Black"
                                 data-selected-description-full="Full description of the M4E1 Threaded Assembled Upper Receiver."
                                 data-selected-price-value="$139.99"
                                 data-selected-stock-status="In Stock"
                                 data-selected-original-url="https://www.aeroprecisionusa.com/m4e1-threaded-assembled-upper-receiver-anodized-black">
                                <div class="row g-0">
                                    <div class="col-4">
                                        <img src="https://placehold.co/300x200?text=M4E1+Upper" class="img-fluid rounded-start h-100" style="object-fit: cover;" alt="M4E1 Threaded Assembled Upper Product Image">
                                    </div>
                                    <div class="col-8">
                                        <div class="product-item-details-content d-flex flex-column h-100 p-2">
                                            <div class="d-flex">
                                                <div class="flex-grow-1 me-2 d-flex align-items-center">
                                                    <h6 class="product-name mb-1">M4E1 Threaded Assembled Upper Receiver - Anodized Black</h6>
                                                </div>
                                                <div class="product-far-right-box text-end">
                                                    <div class="product-indicators mb-1">
                                                        <span class="badge bg-primary product-active-indicator">Active</span>
                                                        <span class="badge bg-info product-purchase-status ms-1">Not Purchased</span>
                                                    </div>
                                                    <p class="mb-0 product-price"><strong>Price:</strong> $139.99</p>
                                                    <p class="mb-0 product-stock-status"><strong>Status:</strong> In Stock</p>
                                                </div>
                                            </div>
                                            <div class="mt-auto pt-2">
                                                <a href="https://www.aeroprecisionusa.com/m4e1-threaded-assembled-upper-receiver-anodized-black" target="_blank" class="btn btn-outline-success btn-sm product-view-button w-100">View Product</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="product-item-card mt-3" 
                                 data-price-value="104.99" 
                                 data-category-thumb-src="https://placehold.co/100x100?text=AR15+UpperMain" 
                                 data-category-description="AR15 Assembled Upper Receiver - Anodized Black"
                                 data-selected-image-src="https://placehold.co/600x400?text=AR15+Upper+Large"
                                 data-selected-name="AR15 Assembled Upper Receiver - Anodized Black"
                                 data-selected-description-full="Full description of the AR15 Assembled Upper Receiver."
                                 data-selected-price-value="$104.99"
                                 data-selected-stock-status="Out of Stock"
                                 data-selected-original-url="https://www.aeroprecisionusa.com/ar15-assembled-upper-receiver-anodized-black">
                                <div class="row g-0">
                                    <div class="col-4">
                                        <img src="https://placehold.co/300x200?text=AR15+Upper" class="img-fluid rounded-start h-100" style="object-fit: cover;" alt="AR15 Assembled Upper Product Image">
                                    </div>
                                    <div class="col-8">
                                        <div class="product-item-details-content d-flex flex-column h-100 p-2">
                                            <div class="d-flex">
                                                <div class="flex-grow-1 me-2 d-flex align-items-center">
                                                    <h6 class="product-name mb-1">AR15 Assembled Upper Receiver - Anodized Black</h6>
                                                </div>
                                                <div class="product-far-right-box text-end">
                                                    <div class="product-indicators mb-1">
                                                        <span class="badge bg-secondary product-purchase-status ms-1">Not Purchased</span>
                                                    </div>
                                                    <p class="mb-0 product-price"><strong>Price:</strong> $104.99</p>
                                                    <p class="mb-0 product-stock-status"><strong>Status:</strong> Out of Stock</p>
                                                </div>
                                            </div>
                                            <div class="mt-auto pt-2">
                                                <a href="https://www.aeroprecisionusa.com/ar15-assembled-upper-receiver-anodized-black" target="_blank" class="btn btn-outline-secondary btn-sm product-view-button w-100 disabled">Currently Unavailable</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="other-source-upper-receiver-content" role="tabpanel" aria-labelledby="other-source-upper-receiver-tab">
                            <p class="mt-3">Paste a URL above, or details from other sources will appear here once implemented.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Component Category: Barrel -->
            <div class="component-category" id="category-barrel">
                <div class="d-flex justify-content-between align-items-center">
                    <div class="d-flex align-items-center">
                        <img src="https://placehold.co/100x100?text=Barrel" alt="Barrel Placeholder" class="img-thumbnail me-3 category-preview-thumb" style="cursor: pointer;" data-bs-toggle="collapse" data-bs-target="#barrelCollapse" aria-expanded="false">
                        <div>
                            <h5 class="mb-1">Barrel</h5>
                            <p class="mb-0 category-preview-description">The core of the rifle that directs bullet travel.</p>
                        </div>
                    </div>
                    <div>
                        <span class="badge bg-secondary category-preview-price">$0.00</span>
                    </div>
                </div>
                <div class="mt-3 collapse" id="barrelCollapse">
                    <input class="form-control mb-2" placeholder="Paste product URL or select from catalog">
                    <ul class="nav nav-tabs catalog-tabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="selected-barrel-tab" data-bs-toggle="tab" data-bs-target="#selected-barrel-content" type="button" role="tab" aria-selected="false">Selected Item</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="aero-barrel-tab" data-bs-toggle="tab" data-bs-target="#aero-barrel-content" type="button" role="tab" aria-selected="true">Aero Precision</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="other-source-barrel-tab" data-bs-toggle="tab" data-bs-target="#other-source-barrel-content" type="button" role="tab" aria-selected="false">Other Source</button>
                        </li>
                    </ul>
                    <div class="tab-content catalog-content">
                        <div class="tab-pane fade" id="selected-barrel-content" role="tabpanel" aria-labelledby="selected-barrel-tab">
                            <div class="selected-item-details p-3"><p>No Barrel selected. Please choose one from the sources.</p></div>
                        </div>
                        <div class="tab-pane fade show active product-list-horizontal-scroll" id="aero-barrel-content" role="tabpanel" aria-labelledby="aero-barrel-tab">
                            <div class="product-item-card mt-3" 
                                 data-price-value="150.00" 
                                 data-category-thumb-src="https://placehold.co/100x100?text=BarrelMain" 
                                 data-category-description="5.56 CMV Barrel, Carbine Length"
                                 data-selected-image-src="https://placehold.co/600x400?text=Barrel+Large"
                                 data-selected-name="5.56 CMV Barrel, Carbine Length"
                                 data-selected-description-full="Full description of the 5.56 CMV Barrel, Carbine Length."
                                 data-selected-price-value="$150.00"
                                 data-selected-stock-status="In Stock"
                                 data-selected-original-url="#">
                                <div class="row g-0">
                                    <div class="col-4"><img src="https://placehold.co/300x200?text=Example+Barrel" class="img-fluid rounded-start h-100" style="object-fit: cover;" alt="Example Barrel Product Image"></div>
                                    <div class="col-8">
                                        <div class="product-item-details-content d-flex flex-column h-100 p-2">
                                            <div class="d-flex">
                                                <div class="flex-grow-1 me-2 d-flex align-items-center"><h6 class="product-name mb-1">5.56 CMV Barrel, Carbine Length</h6></div>
                                                <div class="product-far-right-box text-end">
                                                    <div class="product-indicators mb-1"><span class="badge bg-info product-purchase-status ms-1">Not Purchased</span></div>
                                                    <p class="mb-0 product-price"><strong>Price:</strong> $150.00</p>
                                                    <p class="mb-0 product-stock-status"><strong>Status:</strong> In Stock</p>
                                                </div>
                                            </div>
                                            <div class="mt-auto pt-2"><a href="#" class="btn btn-outline-success btn-sm product-view-button w-100">View Product</a></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="other-source-barrel-content" role="tabpanel" aria-labelledby="other-source-barrel-tab">
                            <p class="mt-3">Paste a URL above, or details from other sources will appear here once implemented.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Component Category: Handguard -->
            <div class="component-category" id="category-handguard">
                <div class="d-flex justify-content-between align-items-center">
                    <div class="d-flex align-items-center">
                        <img src="https://placehold.co/100x100?text=Handguard" alt="Handguard Placeholder" class="img-thumbnail me-3 category-preview-thumb" style="cursor: pointer;" data-bs-toggle="collapse" data-bs-target="#handguardCollapse" aria-expanded="false">
                        <div>
                            <h5 class="mb-1">Handguard</h5>
                            <p class="mb-0 category-preview-description">Covers barrel and provides mounting rails.</p>
                        </div>
                    </div>
                    <div>
                        <span class="badge bg-secondary category-preview-price">$0.00</span>
                    </div>
                </div>
                <div class="mt-3 collapse" id="handguardCollapse">
                     <input class="form-control mb-2" placeholder="Paste product URL or select from catalog">
                    <ul class="nav nav-tabs catalog-tabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="selected-handguard-tab" data-bs-toggle="tab" data-bs-target="#selected-handguard-content" type="button" role="tab" aria-selected="false">Selected Item</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="aero-handguard-tab" data-bs-toggle="tab" data-bs-target="#aero-handguard-content" type="button" role="tab" aria-selected="true">Aero Precision</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="other-source-handguard-tab" data-bs-toggle="tab" data-bs-target="#other-source-handguard-content" type="button" role="tab" aria-selected="false">Other Source</button>
                        </li>
                    </ul>
                    <div class="tab-content catalog-content">
                        <div class="tab-pane fade" id="selected-handguard-content" role="tabpanel" aria-labelledby="selected-handguard-tab">
                            <div class="selected-item-details p-3"><p>No Handguard selected. Please choose one from the sources.</p></div>
                        </div>
                        <div class="tab-pane fade show active product-list-horizontal-scroll" id="aero-handguard-content" role="tabpanel" aria-labelledby="aero-handguard-tab">
                            <div class="product-item-card mt-3" 
                                 data-price-value="189.99" 
                                 data-category-thumb-src="https://placehold.co/100x100?text=HandguardMain" 
                                 data-category-description="AR15 ATLAS R-ONE M-LOK Handguard"
                                 data-selected-image-src="https://placehold.co/600x400?text=Handguard+Large"
                                 data-selected-name="AR15 ATLAS R-ONE M-LOK Handguard"
                                 data-selected-description-full="Full description of the AR15 ATLAS R-ONE M-LOK Handguard."
                                 data-selected-price-value="$189.99"
                                 data-selected-stock-status="In Stock"
                                 data-selected-original-url="#">
                                <div class="row g-0">
                                    <div class="col-4"><img src="https://placehold.co/300x200?text=Example+Handguard" class="img-fluid rounded-start h-100" style="object-fit: cover;" alt="Example Handguard Product Image"></div>
                                    <div class="col-8">
                                        <div class="product-item-details-content d-flex flex-column h-100 p-2">
                                            <div class="d-flex">
                                                <div class="flex-grow-1 me-2 d-flex align-items-center"><h6 class="product-name mb-1">AR15 ATLAS R-ONE M-LOK Handguard</h6></div>
                                                <div class="product-far-right-box text-end">
                                                    <div class="product-indicators mb-1"><span class="badge bg-info product-purchase-status ms-1">Not Purchased</span></div>
                                                    <p class="mb-0 product-price"><strong>Price:</strong> $189.99</p>
                                                    <p class="mb-0 product-stock-status"><strong>Status:</strong> In Stock</p>
                                                </div>
                                            </div>
                                            <div class="mt-auto pt-2"><a href="#" class="btn btn-outline-success btn-sm product-view-button w-100">View Product</a></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="other-source-handguard-content" role="tabpanel" aria-labelledby="other-source-handguard-tab">
                            <p class="mt-3">Paste a URL above, or details from other sources will appear here once implemented.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Component Category: Bolt Carrier Group (BCG) -->
            <div class="component-category" id="category-bcg">
                <div class="d-flex justify-content-between align-items-center">
                    <div class="d-flex align-items-center">
                        <img src="https://placehold.co/100x100?text=BCG" alt="BCG Placeholder" class="img-thumbnail me-3 category-preview-thumb" style="cursor: pointer;" data-bs-toggle="collapse" data-bs-target="#bcgCollapse" aria-expanded="false">
                        <div>
                            <h5 class="mb-1">Bolt Carrier Group (BCG)</h5>
                            <p class="mb-0 category-preview-description">Chambers, fires, and extracts the round.</p>
                        </div>
                    </div>
                    <div>
                        <span class="badge bg-secondary category-preview-price">$0.00</span>
                    </div>
                </div>
                <div class="mt-3 collapse" id="bcgCollapse">
                    <input class="form-control mb-2" placeholder="Paste product URL or select from catalog">
                    <ul class="nav nav-tabs catalog-tabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="selected-bcg-tab" data-bs-toggle="tab" data-bs-target="#selected-bcg-content" type="button" role="tab" aria-selected="false">Selected Item</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="aero-bcg-tab" data-bs-toggle="tab" data-bs-target="#aero-bcg-content" type="button" role="tab" aria-selected="true">Aero Precision</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="other-source-bcg-tab" data-bs-toggle="tab" data-bs-target="#other-source-bcg-content" type="button" role="tab" aria-selected="false">Other Source</button>
                        </li>
                    </ul>
                    <div class="tab-content catalog-content">
                        <div class="tab-pane fade" id="selected-bcg-content" role="tabpanel" aria-labelledby="selected-bcg-tab">
                            <div class="selected-item-details p-3"><p>No BCG selected. Please choose one from the sources.</p></div>
                        </div>
                        <div class="tab-pane fade show active product-list-horizontal-scroll" id="aero-bcg-content" role="tabpanel" aria-labelledby="aero-bcg-tab">
                            <div class="product-item-card mt-3" 
                                 data-price-value="149.99" 
                                 data-category-thumb-src="https://placehold.co/100x100?text=BCGMain" 
                                 data-category-description="5.56 Bolt Carrier Group, Complete - Black Nitride"
                                 data-selected-image-src="https://placehold.co/600x400?text=BCG+Large"
                                 data-selected-name="5.56 Bolt Carrier Group, Complete - Black Nitride"
                                 data-selected-description-full="Full description of the 5.56 Bolt Carrier Group, Complete - Black Nitride."
                                 data-selected-price-value="$149.99"
                                 data-selected-stock-status="In Stock"
                                 data-selected-original-url="#">
                                <div class="row g-0">
                                    <div class="col-4"><img src="https://placehold.co/300x200?text=Example+BCG" class="img-fluid rounded-start h-100" style="object-fit: cover;" alt="Example BCG Product Image"></div>
                                    <div class="col-8">
                                        <div class="product-item-details-content d-flex flex-column h-100 p-2">
                                            <div class="d-flex">
                                                <div class="flex-grow-1 me-2 d-flex align-items-center"><h6 class="product-name mb-1">5.56 Bolt Carrier Group, Complete - Black Nitride</h6></div>
                                                <div class="product-far-right-box text-end">
                                                    <div class="product-indicators mb-1"><span class="badge bg-info product-purchase-status ms-1">Not Purchased</span></div>
                                                    <p class="mb-0 product-price"><strong>Price:</strong> $149.99</p>
                                                    <p class="mb-0 product-stock-status"><strong>Status:</strong> In Stock</p>
                                                </div>
                                            </div>
                                            <div class="mt-auto pt-2"><a href="#" class="btn btn-outline-success btn-sm product-view-button w-100">View Product</a></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="other-source-bcg-content" role="tabpanel" aria-labelledby="other-source-bcg-tab">
                            <p class="mt-3">Paste a URL above, or details from other sources will appear here once implemented.</p>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>